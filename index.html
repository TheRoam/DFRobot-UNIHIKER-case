<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Raspberry Pi 4B simple case</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
<body>
<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

<script type="importmap">
    {
    "imports": {
    "three": "https://unpkg.com/three@0.146.0/build/three.module.js"
    }
    }
</script>

<script type="module">
    import * as THREE from 'three';

    import { GLTFLoader } from 'https://unpkg.com/three@0.146.0/examples/jsm/loaders/GLTFLoader.js';
    import { OrbitControls } from 'https://unpkg.com/three@0.146.0/examples/jsm/controls/OrbitControls.js';

	let camera, scene, renderer;

	init();
	render();

	function init() {

		const container = document.createElement( 'div' );
		document.body.appendChild( container );

		camera = new THREE.PerspectiveCamera( 30, window.innerWidth / window.innerHeight, 0.1, 20 );
        camera.position.set( 0.2, 0.2, 0.2 );

		scene = new THREE.Scene();
    
    //add background image
const texture = new THREE.TextureLoader().load( "./raw/main/test/Unity1-north.png" );
scene.background=texture; 
            
        scene.add( new THREE.AmbientLight( 0xffffff, 0.75 ) );

		const dirLight = new THREE.DirectionalLight( 0xffffff, 1 );
		dirLight.position.set( 5, 10, 7.5 );
		dirLight.castShadow = true;
		dirLight.shadow.camera.right = 2;
		dirLight.shadow.camera.left = - 2;
		dirLight.shadow.camera.top	= 2;
		dirLight.shadow.camera.bottom = - 2;

		dirLight.shadow.mapSize.width = 1024;
		dirLight.shadow.mapSize.height = 1024;
		scene.add( dirLight );

        //model
         const loader = new GLTFLoader();
		 loader.load( './raw/main/test/rPi4_case_v1.glb', function ( gltf ) {
			scene.add( gltf.scene );
			render();
		 } );

		renderer = new THREE.WebGLRenderer( { antialias: true } );
                
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );
		renderer.toneMapping = THREE.ACESFilmicToneMapping;
		renderer.toneMappingExposure = 1;
		renderer.outputEncoding = THREE.sRGBEncoding;
		container.appendChild( renderer.domElement );

		const controls = new OrbitControls( camera, renderer.domElement );
		controls.addEventListener( 'change', render );
        controls.minDistance = 0.001;
		controls.maxDistance = 1;
		controls.target.set( 0.03, 0.01, -0.01 );
		controls.update();

		window.addEventListener( 'resize', onWindowResize );

	}

	function onWindowResize() {

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();

		renderer.setSize( window.innerWidth, window.innerHeight );

		render();

	}

			//

	function render() {

		renderer.render( scene, camera );

	}

</script>
</body>
</html>
